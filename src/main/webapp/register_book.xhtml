<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
      
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Cadastrar/Editar Livro</title>
	</head>
	
	<ui:composition template="_template.xhtml">
	
		<ui:define name="corpo">
			<h:outputScript name="jsf.js" library="jakarta.faces" target="head"></h:outputScript>
			
			<h:form id="register-book">
			
	            <h2>
	                <h:outputText value="Novo Livro" rendered="#{empty bookMB.book.id}" />
	                <h:outputText value="Editar Livro" rendered="#{not empty bookMB.book.id}" />
	            </h2>
	            
            	<p:messages styleClass="erros" />
            	
	            <p:fieldset legend="Dados do Livro">
	            
	                <!-- Campo para o ISBN -->
					<h:outputLabel value="ISBN" for="isbn" />
					<p:inputMask id="isbn" value="#{bookMB.book.ISBN}" required="true" requiredMessage="O ISBN é obrigatório."
					    mask="999-9-99-999999-9" placeholder="999-9-99-999999-9" />
	
	                <!-- Campo para o Título -->
	                <h:outputLabel value="Título" for="title" />
	                <p:inputText id="title" value="#{bookMB.book.title}" required="true" requiredMessage="O título é obrigatório." />
	
	                <!-- Campo para o Autor -->
	                <h:outputLabel value="Autor" for="author" />
	                <p:inputText id="author" value="#{bookMB.book.author}" required="true" requiredMessage="O autor é obrigatório." />
	
	                <!-- Campo para a Descrição do Livro -->
	                <h:outputLabel value="Descrição" for="description" />
	                <p:inputTextarea id="description" value="#{bookMB.book.description}" required="true" requiredMessage="A descrição é obrigatória." />
	
	                <!-- Campo para a Quantidade em Estoque -->
					<h:outputLabel value="Quantidade em Estoque" for="quantidade" />
					<p:inputNumber id="quantidade" value="#{bookMB.book.quantityStock}" 
					    required="true" requiredMessage="A quantidade em estoque é obrigatória."
					    min="1" />
	
	                <!-- Campo para a Disponibilidade -->
	                <h:outputLabel value="Disponível" for="available" />
	                <p:selectBooleanCheckbox id="available" value="#{bookMB.book.available}" />
	
	                <!-- Select para a Categoria -->
	                <h:outputLabel value="Categoria" for="categoria" />
	                <p:selectOneMenu id="category" value="#{bookMB.idCategory}" required="true" requiredMessage="A categoria é obrigatória.">
	                    <f:selectItems value="#{categoryMB.listAll()}" var="category" 
	                    	itemLabel="#{category.name}" itemValue="#{category.id}" />
	                </p:selectOneMenu>
	
	                <!-- Botões de ação -->
	                <h:commandButton value="Salvar" action="#{bookMB.addBook}" rendered="#{empty bookMB.book.id}">
	                    <f:ajax execute="@form" render=":register-book" />
	                </h:commandButton>
	                
	                <h:commandButton value="Cancelar" action="#{bookMB.cancel}" rendered="#{not empty bookMB.book.id}">
	                    <f:ajax render=":register-book" />
	                </h:commandButton>
	                
	            </p:fieldset>
        	</h:form>
			
		</ui:define>
	</ui:composition>
</html>